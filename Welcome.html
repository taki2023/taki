<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
*{box-sizing:border-box;margin:0;padding:0;}

body{
  background:transparent;
  font-family:Arial, sans-serif;
  overflow:hidden;
}

#welcomeBox{
  width:260px;
  padding:12px;
  background:#181210;
  border-radius:14px;
  display:flex;
  align-items:center;
  gap:10px;
  color:#fff;
  border:1px solid rgba(255,120,60,.3);
}

#welcomeBox img{
  width:40px;
  height:40px;
  border-radius:50%;
}
.username{
  font-weight:bold;
  color:#ff8c4a;
}
</style>
</head>

<body>

<div id="welcomeBox">
  Loading...
</div>
  
<script>
const club = "hot-chilli-checkmate";
const proxy = "https://corsproxy.io/?";

async function loadMember(){
  try {

    const res = await fetch(
      proxy + encodeURIComponent(
        `https://api.chess.com/pub/club/${club}/members`
      )
    );

    const data = await res.json();

    if(!data.all_time || data.all_time.length === 0){
      document.getElementById("welcomeBox").innerHTML = "No members found.";
      return;
    }

    // Take last username from all_time list
    const username = data.all_time[data.all_time.length - 1];

    document.getElementById("welcomeBox").innerHTML =
      `ðŸ‘‹ Welcome <b>${username}</b> to the Chillies Army ðŸ”¥`;

  } catch(e){
    document.getElementById("welcomeBox").innerHTML = "Error loading member.";
  }
}

loadMember();
</script>

</body>
</html>
