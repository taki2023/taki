<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html, body {
  margin: 0;
  padding: 0;
  background: transparent;
  overflow: hidden;
}

#player {
  width: 100%;
  height: 64px;
  background: linear-gradient(180deg, #1a120e, #120c09);
  border-radius: 14px;
  display: flex;
  align-items: center;
  padding: 10px 12px;
  box-sizing: border-box;
  font-family: system-ui, sans-serif;
}

/* Buttons */
.btn {
  width: 22px;
  height: 22px;
  cursor: pointer;
  fill: #ffb078;
  flex-shrink: 0;
}

/* Bars */
.bar {
  position: relative;
  height: 6px;
  background: rgba(255,255,255,0.15);
  border-radius: 6px;
  cursor: pointer;
}

.fill {
  height: 100%;
  background: #ffb078;
  border-radius: 6px;
}

/* Knobs */
.knob {
  position: absolute;
  top: 50%;
  width: 12px;
  height: 12px;
  background: #ffb078;
  border-radius: 50%;
  transform: translate(-50%, -50%);
}

/* Layout */
#progressWrap {
  flex: 1;
  margin: 0 10px;
}

#volumeWrap {
  width: 70px;
  margin-left: 8px;
}
</style>
</head>

<body>
<div id="player">
  <!-- Play -->
  <svg id="playBtn" class="btn" viewBox="0 0 24 24">
    <polygon points="6,4 20,12 6,20"/>
  </svg>

  <!-- Progress -->
  <div id="progressWrap" class="bar">
    <div id="progressFill" class="fill"></div>
    <div id="progressKnob" class="knob"></div>
  </div>

  <!-- Volume icon -->
  <svg id="volIcon" class="btn" viewBox="0 0 24 24">
    <path d="M3 9v6h4l5 5V4L7 9H3z"/>
  </svg>

  <!-- Volume -->
  <div id="volumeWrap" class="bar">
    <div id="volumeFill" class="fill"></div>
    <div id="volumeKnob" class="knob"></div>
  </div>
</div>

<audio id="audio" preload="auto"
src="https://cs1.mp3.pm/download/196179361/M0wyQ0lNU3lsSmcrcWVXSFZhSTFtTmZPTm9GL1VtLzMwNXNaZkpWU1FsTGdEcTNxcVFxVjd0dE1uM0dDdkx6Y0lxWk5tRDZqME5uR0NZa1NKeURsdTJZOTB1RVY3bFJlRWJ3UysyMXIvd0pvT21IY2doQ3UycWppcC9hYnc1Uzc/8D_TOP_MUSIC_-_Alan_Walker_-_Faded_(mp3.pm).mp3">
</audio>

<script>
const audio = document.getElementById("audio");

/* Restore memory */
audio.volume = localStorage.vol ? +localStorage.vol : 0.6;
audio.currentTime = localStorage.pos ? +localStorage.pos : 0;

const playBtn = document.getElementById("playBtn");
const volIcon = document.getElementById("volIcon");

function bindBar(bar, fill, knob, get, set) {
  function update(e) {
    const r = bar.getBoundingClientRect();
    let v = (e.clientX - r.left) / r.width;
    v = Math.max(0, Math.min(1, v));
    set(v);
  }
  bar.addEventListener("click", update);
  bar.addEventListener("mousedown", e => {
    update(e);
    document.onmousemove = update;
    document.onmouseup = () => document.onmousemove = null;
  });
}

bindBar(
  progressWrap, progressFill, progressKnob,
  () => audio.currentTime / audio.duration || 0,
  v => audio.currentTime = v * audio.duration
);

bindBar(
  volumeWrap, volumeFill, volumeKnob,
  () => audio.volume,
  v => {
    audio.volume = v;
    localStorage.vol = v;
  }
);

playBtn.onclick = () => audio.paused ? audio.play() : audio.pause();
audio.onplay = () => playBtn.innerHTML = `<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>`;
audio.onpause = () => playBtn.innerHTML = `<polygon points="6,4 20,12 6,20"/>`;

audio.ontimeupdate = () => {
  const p = audio.currentTime / audio.duration || 0;
  progressFill.style.width = p * 100 + "%";
  progressKnob.style.left = p * 100 + "%";
  localStorage.pos = audio.currentTime;
};

audio.onvolumechange = () => {
  volumeFill.style.width = audio.volume * 100 + "%";
  volumeKnob.style.left = audio.volume * 100 + "%";
  volIcon.innerHTML = audio.volume === 0
    ? `<path d="M3 9v6h4l5 5V4L7 9H3z"/><line x1="16" y1="8" x2="22" y2="16" stroke="#ffb078" stroke-width="2"/><line x1="22" y1="8" x2="16" y2="16" stroke="#ffb078" stroke-width="2"/>`
    : `<path d="M3 9v6h4l5 5V4L7 9H3z"/>`;
};

volIcon.onclick = () => audio.volume = audio.volume ? 0 : (localStorage.vol || 0.6);
</script>
</body>
</html>
