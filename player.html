<!-- ðŸŽµ ELEGANT SIDEBAR MUSIC PLAYER -->
<div style="
width:92%;
margin:0 auto;
background:linear-gradient(180deg, rgba(25,18,15,0.55), rgba(15,10,8,0.65));
border-radius:18px;
padding:14px;
border:1.5px solid rgba(255,176,120,0.35);
box-shadow:0 0 18px rgba(0,0,0,.35), inset 0 0 12px rgba(0,0,0,.25);
text-align:center;
backdrop-filter:blur(6px);
" id="playerBox">

<!-- Controls -->
<div style="display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:12px;">

<!-- Play Button -->
<button id="playPauseBtn" style="
width:38px;
height:38px;
border-radius:50%;
background:linear-gradient(145deg,#ffb37a,#ff8a70);
border:none;
cursor:pointer;
font-size:15px;
box-shadow:0 0 12px rgba(255,176,120,0.55);
transition:all .25s ease;
">â–¶</button>

<!-- Progress Bar -->
<div id="progressBar" style="
flex:1;
height:12px;
background:rgba(40,25,20,0.6);
border-radius:10px;
position:relative;
cursor:pointer;
overflow:hidden;
box-shadow:inset 0 0 4px rgba(0,0,0,.5);
">

<div id="progressFilled" style="
height:100%;
width:0%;
background:linear-gradient(90deg,#ffb37a,#ff8a70);
border-radius:10px;
transition:width .15s linear;
"></div>

</div>

<!-- Bigger Timer RIGHT -->
<div id="timeDisplay" style="
min-width:90px;
font-size:14px;
font-weight:600;
color:#ffffff;
text-align:right;
letter-spacing:0.4px;
">0:00 / 0:00</div>

</div>

<!-- Volume -->
<div style="display:flex; align-items:center; justify-content:center; gap:8px;">
<span style="color:#caa6ff; font-size:16px;">ðŸ”Š</span>

<div style="
position:relative;
width:100px;
height:6px;
background:rgba(40,25,20,0.6);
border-radius:6px;
overflow:hidden;
">

<div id="volumeFill" style="
position:absolute;
height:100%;
width:70%;
background:linear-gradient(90deg,#7b4dff,#b388ff,#d1b3ff);
"></div>

<input id="volumeControl" type="range" min="0" max="1" step="0.01" value="0.7" style="
position:absolute;
width:100%;
height:100%;
opacity:0;
cursor:pointer;
">

</div>
</div>

<audio id="audioPlayer"
src="https://cs1.mp3.pm/download/196179361/M0wyQ0lNU3lsSmcrcWVXSFZhSTFtTmZPTm9GL1VtLzMwNXNaZkpWU1FsTGdEcTNxcVFxVjd0dE1uM0dDdkx6Y0lxWk5tRDZqME5uR0NZa1NKeURsdTJZOTB1RVY3bFJlRWJ3UysyMXIvd0pvT21IY2doQ3UycWppcC9hYnc1Uzc/8D_TOP_MUSIC_-_Alan_Walker_-_Faded_(mp3.pm).mp3">
</audio>
</div>

<style>
@keyframes musicGlow {
0% { box-shadow:0 0 12px rgba(255,176,120,0.25); }
50% { box-shadow:0 0 26px rgba(255,176,120,0.55); }
100% { box-shadow:0 0 12px rgba(255,176,120,0.25); }
}
.playingGlow {
animation: musicGlow 2.2s ease-in-out infinite;
}
</style>

<script>
const audio = document.getElementById('audioPlayer');
const playBtn = document.getElementById('playPauseBtn');
const progressFilled = document.getElementById('progressFilled');
const progressBar = document.getElementById('progressBar');
const volumeControl = document.getElementById('volumeControl');
const volumeFill = document.getElementById('volumeFill');
const timeDisplay = document.getElementById('timeDisplay');
const playerBox = document.getElementById('playerBox');

/* Load saved volume + position */
const savedVolume = localStorage.getItem('musicVolume');
const savedTime = localStorage.getItem('musicTime');

if(savedVolume !== null){
audio.volume = savedVolume;
volumeControl.value = savedVolume;
volumeFill.style.width = (savedVolume * 100) + '%';
}

audio.addEventListener('loadedmetadata', ()=>{
if(savedTime !== null && savedTime < audio.duration){
audio.currentTime = savedTime;
}
updateTimer();
});

function formatTime(seconds) {
const mins = Math.floor(seconds / 60);
const secs = Math.floor(seconds % 60);
return mins + ':' + (secs < 10 ? '0' : '') + secs;
}

function updateTimer(){
timeDisplay.textContent =
formatTime(audio.currentTime) + ' / ' + formatTime(audio.duration);
}

/* Play / Pause */
playBtn.addEventListener('click', () => {
if(audio.paused) {
audio.play();
playBtn.textContent = 'âšâš';
playerBox.classList.add('playingGlow');
} else {
audio.pause();
playBtn.textContent = 'â–¶';
playerBox.classList.remove('playingGlow');
}
});

/* Progress update + SAVE TIME */
audio.addEventListener('timeupdate', () => {
const percent = (audio.currentTime / audio.duration) * 100;
progressFilled.style.width = percent + '%';
updateTimer();
localStorage.setItem('musicTime', audio.currentTime);
});

/* Seek */
progressBar.addEventListener('click', (e) => {
const rect = progressBar.getBoundingClientRect();
const clickX = e.clientX - rect.left;
audio.currentTime = (clickX / rect.width) * audio.duration;
});

/* Volume + SAVE */
volumeControl.addEventListener('input', (e) => {
const val = e.target.value;
audio.volume = val;
volumeFill.style.width = (val * 100) + '%';
localStorage.setItem('musicVolume', val);
});

/* Stop glow when ended */
audio.addEventListener('ended', ()=>{
playerBox.classList.remove('playingGlow');
playBtn.textContent = 'â–¶';
});
</script>
