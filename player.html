<style>
/* Ensure all widths include padding and borders */
* {
    box-sizing: border-box;
}

/* Remove default margins and scroll */
html, body {
    margin: 0;
    padding: 0;
    background: transparent; /* important for transparency */
    width: 100%;
    height: 100%;
    overflow: hidden;
}

/* Player container */
#playerBox {
    width: 100%;
    height: 100%; /* fill iframe */
    margin: 0;
    padding: 12px;
    background: rgba(10,14,12,0.50); /* match Chess.com sidebar */
    border: 2px solid rgba(255,176,120,0.45);
    border-radius: 16px; /* keeps it nicely rounded */
    box-shadow: inset 0 0 10px rgba(0,0,0,0.25);
    backdrop-filter: blur(6px);
}

</style>
</style>
<!-- üéµ ELEGANT SIDEBAR MUSIC PLAYER -->
<div style="
width:100%;
margin:0;
background:linear-gradient(180deg, rgba(25,18,15,0.55), rgba(15,10,8,0.65));
border-radius:18px;
padding:14px;
border:1.5px solid rgba(255,176,120,0.35);
box-shadow:0 0 18px rgba(0,0,0,.35), inset 0 0 12px rgba(0,0,0,.25);
text-align:center;
backdrop-filter:blur(6px);
" id="playerBox">

<!-- TOP CONTROLS -->
<div style="display:flex;align-items:center;gap:10px;margin-bottom:14px;">

<button id="playPauseBtn" style="
width:38px;height:38px;border-radius:50%;
background:linear-gradient(145deg,#ffb37a,#ff8a70);
border:none;cursor:pointer;font-size:15px;
box-shadow:0 0 12px rgba(255,176,120,0.55);
">‚ñ∂</button>

<!-- PROGRESS BAR -->
<div id="progressBar" style="
flex:1;height:12px;
background:rgba(40,25,20,0.6);
border-radius:10px;
position:relative;
cursor:pointer;
">

<div id="progressFilled" style="
height:100%;
width:0%;
background:linear-gradient(90deg,#ffb37a,#ff8a70);
border-radius:10px;
position:relative;
overflow:visible;
">

<div id="progressKnob" style="
position:absolute;
right:-8px;
top:50%;
transform:translateY(-50%);
width:16px;height:16px;
border-radius:50%;
background:#ffe2c4;
box-shadow:0 0 8px rgba(255,176,120,.9);
"></div>

</div>
</div>

<button id="loopBtn" style="
width:36px;height:36px;border-radius:50%;
background:rgba(255,255,255,0.08);
border:1px solid rgba(255,255,255,0.15);
cursor:pointer;font-size:15px;color:#fff;
">üîÅ</button>

<div id="timeDisplay" style="
min-width:110px;
font-size:18px;
font-weight:700;
color:#fff;
text-align:right;
">0:00 / 0:00</div>

</div>

<!-- VOLUME -->
<div style="display:flex;align-items:center;justify-content:center;gap:8px;">
<span id="cutIcon" style="font-size:18px;cursor:pointer;">üîä</span>

<div id="volumeBar" style="
position:relative;
width:100px;height:6px;
background:rgba(40,25,20,0.6);
border-radius:6px;
cursor:pointer;
">

<div id="volumeFill" style="
position:absolute;height:100%;
width:70%;
background:linear-gradient(90deg,#7b4dff,#b388ff,#d1b3ff);
border-radius:6px;
"></div>

<div id="volumeKnob" style="
position:absolute;
top:-5px;
left:70%;
width:3px;height:16px;
background:#e9ddff;
box-shadow:0 0 6px rgba(180,140,255,.9);
"></div>
</div>
</div>

<audio id="audioPlayer" style="display:none"
src="https://cs1.mp3.pm/download/196179361/M0wyQ0lNU3lsSmcrcWVXSFZhSTFtTmZPTm9GL1VtLzMwNXNaZkpWU1FsTGdEcTNxcVFxVjd0dE1uM0dDdkx6Y0lxWk5tRDZqME5uR0NZa1NKeURsdTJZOTB1RVY3bFJlRWJ3UysyMXIvd0pvT21IY2doQ3UycWppcC9hYnc1Uzc/8D_TOP_MUSIC_-_Alan_Walker_-_Faded_(mp3.pm).mp3">
</audio>
</div>

<script>
const audio = document.getElementById('audioPlayer');
const playBtn = document.getElementById('playPauseBtn');
const cutIcon = document.getElementById('cutIcon');
const progressBar = document.getElementById('progressBar');
const progressFilled = document.getElementById('progressFilled');
const volumeBar = document.getElementById('volumeBar');
const volumeFill = document.getElementById('volumeFill');
const volumeKnob = document.getElementById('volumeKnob');
const timeDisplay = document.getElementById('timeDisplay');

let draggingVolume = false;

/* LOAD MEMORY */
let savedVolume = parseFloat(localStorage.getItem('musicVolume'));
let savedTime = parseFloat(localStorage.getItem('musicTime'));
let savedMuted = localStorage.getItem('musicMuted') === 'true';

audio.volume = isNaN(savedVolume) ? 0.7 : savedVolume;
audio.muted = savedMuted;
if(!isNaN(savedTime)) audio.currentTime = savedTime;

/* ICON */
function updateIcon(){
  cutIcon.textContent =
    (audio.muted || audio.volume === 0) ? 'üîá' : 'üîä';
}

/* VOLUME UI */
function setVolume(v){
  v = Math.max(0, Math.min(1, v));
  audio.volume = v;
  audio.muted = false;
  volumeFill.style.width = (v*100)+'%';
  volumeKnob.style.left = (v*100)+'%';
  localStorage.setItem('musicVolume', v);
  localStorage.setItem('musicMuted', false);
  updateIcon();
}

/* INIT UI */
volumeFill.style.width = (audio.volume*100)+'%';
volumeKnob.style.left = (audio.volume*100)+'%';
updateIcon();

/* PLAY */
playBtn.onclick = () =>
audio.paused ? audio.play() : audio.pause();
audio.onplay = audio.onpause =
() => playBtn.textContent = audio.paused ? '‚ñ∂' : '‚ùö‚ùö';

/* MUTE */
cutIcon.onclick = () => {
  audio.muted = !audio.muted;
  localStorage.setItem('musicMuted', audio.muted);
  if(audio.muted){
    volumeFill.style.width = '0%';
    volumeKnob.style.left = '0%';
  } else {
    setVolume(audio.volume || 0.7);
  }
  updateIcon();
};

/* CLICK VOLUME */
volumeBar.onclick = e => {
  const r = volumeBar.getBoundingClientRect();
  setVolume((e.clientX - r.left) / r.width);
};

/* DRAG VOLUME */
volumeBar.onmousedown = () => draggingVolume = true;
document.onmouseup = () => draggingVolume = false;
document.onmousemove = e => {
  if(!draggingVolume) return;
  const r = volumeBar.getBoundingClientRect();
  setVolume((e.clientX - r.left) / r.width);
};

/* TIME */
function formatTime(s){
  const m = Math.floor(s/60);
  const sec = Math.floor(s%60);
  return m+':'+(sec<10?'0':'')+sec;
}

audio.ontimeupdate = () => {
  progressFilled.style.width =
    (audio.currentTime/(audio.duration||1))*100+'%';
  timeDisplay.textContent =
    formatTime(audio.currentTime)+' / '+formatTime(audio.duration||0);
  localStorage.setItem('musicTime', audio.currentTime);
};

progressBar.onclick = e => {
  const r = progressBar.getBoundingClientRect();
  audio.currentTime =
    ((e.clientX - r.left) / r.width) * audio.duration;
};
</script>
