<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
* { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  background: rgba(28,60,40,.65); /* sidebar style */
  border-radius: 20px;
  font-family: Arial, Helvetica, sans-serif;
  color: #eaeaea;
  overflow: hidden;
}

/* Outer container */
#membersBox {
  padding: 12px;
  max-height: 238px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: #e9c7c0 rgba(36,26,24,.35);
}

/* Member card */
.memberRow {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px;
  border-radius: 18px;
  background: rgba(40,85,55,.35); /* matches sidebar blocks */
  border: 1px solid rgba(120,180,140,.25);
  margin-bottom: 10px;
  transition: all .25s ease;
}

/* Hover effect */
.memberRow:hover {
  transform: translateY(-3px);
  background: #e9c7c0;
  color: #3b2f2b;
  box-shadow: 0 8px 20px rgba(0,0,0,.6);
}

/* Link wrapper */
.memberLink {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  width: 100%;
  color: inherit;
}

/* Avatar */
.memberAvatar {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  border: 2px solid #78b48c;
  object-fit: cover;
  transition: .25s;
}

.memberRow:hover .memberAvatar {
  border-color: #3b2f2b;
}

/* Name */
.memberName {
  font-weight: 800;
  font-size: 12px;
  margin-bottom: 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 140px;
}

/* Rating */
.memberRating {
  font-size: 11px;
  opacity: .85;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-thumb {
  background: #e9c7c0;
  border-radius: 10px;
}
</style>
</head>
<body>
<div id="membersBox"></div>

<script>
async function loadNewest() {
  try {
    const r = await fetch("https://api.chess.com/pub/club/anime-team-3/members");
    const d = await r.json();

    const members = [...d.weekly, ...d.monthly];
    members.sort((a,b)=>b.joined-a.joined);
    const top3 = members.slice(0,3);

    const rows = await Promise.all(top3.map(async m=>{
      const [pj,stats] = await Promise.all([
        fetch("https://api.chess.com/pub/player/"+m.username).then(r=>r.json()),
        fetch("https://api.chess.com/pub/player/"+m.username+"/stats").then(r=>r.json())
      ]);

      const ratings=[
        {t:"Rapid",v:stats.chess_rapid?.last?.rating},
        {t:"Blitz",v:stats.chess_blitz?.last?.rating},
        {t:"Bullet",v:stats.chess_bullet?.last?.rating},
        {t:"Daily",v:stats.chess_daily?.last?.rating}
      ].filter(x=>x.v);

      const best = ratings.length
          ? ratings.sort((a,b)=>b.v-a.v)[0]
          : {t:"—",v:"—"};

      return `
      <div class="memberRow">
        <a class="memberLink" href="https://www.chess.com/member/${m.username}" target="_blank">
          <img class="memberAvatar" src="${pj.avatar || 'https://taki2023.github.io/taki/default-pawn.png'}">
          <div>
            <div class="memberName">@${m.username}</div>
            <div class="memberRating">${best.t}: ${best.v}</div>
          </div>
        </a>
      </div>`;
    }));

    document.getElementById("membersBox").innerHTML = rows.join("");

  } catch(e){
    document.getElementById("membersBox").innerHTML="Unable to load members";
  }
}

loadNewest();
</script>
</body>
</html>
